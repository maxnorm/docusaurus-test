"use strict";(globalThis.webpackChunkCompose_Documentation=globalThis.webpackChunkCompose_Documentation||[]).push([[5459],{1494:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var s=t(4164);const i={docHero:"docHero_nx4U","docHero--hasImage":"docHero--hasImage_hf_v",docHeroOverlay:"docHeroOverlay_OxUc",docHeroContent:"docHeroContent_iRlb",docHeroTitle:"docHeroTitle_rqEZ",docHeroSubtitle:"docHeroSubtitle_tkrv","docHero--gradient":"docHero--gradient_GWct","docHero--dark":"docHero--dark_FStq","docHero--image":"docHero--image__tA6","docHero--small":"docHero--small_kNkc","docHero--medium":"docHero--medium_AoEx","docHero--large":"docHero--large_WiGE","docHero--full":"docHero--full_laj0",docHeroSection:"docHeroSection_mVc7",docHeroSectionTitle:"docHeroSectionTitle_v3_A"};var o=t(4848);function a({title:e,subtitle:n,backgroundImage:t,variant:a="gradient",height:r="medium",children:c}){const l=t?{backgroundImage:`url(${t})`}:{};return(0,o.jsxs)("div",{className:(0,s.A)(i.docHero,i[`docHero--${a}`],i[`docHero--${r}`],t&&i["docHero--hasImage"]),style:l,children:[(0,o.jsx)("div",{className:i.docHeroOverlay}),(0,o.jsxs)("div",{className:i.docHeroContent,children:[e&&(0,o.jsx)("h1",{className:i.docHeroTitle,children:e}),n&&(0,o.jsx)("p",{className:i.docHeroSubtitle,children:n}),c]})]})}},2953:(e,n,t)=>{t.d(n,{A:()=>r});var s=t(6540),i=t(4164);const o={apiReference:"apiReference_H9Df",apiHeader:"apiHeader_Yc7D",apiMethodContainer:"apiMethodContainer_VvGP",apiMethod:"apiMethod_RAhx",apiEndpoint:"apiEndpoint_IDdk",apiDescription:"apiDescription_LsJu",apiTabs:"apiTabs_UHyO",apiTabButtons:"apiTabButtons_ctjN",apiTabButton:"apiTabButton_pey9",apiTabButtonActive:"apiTabButtonActive_HJJA",apiTabContent:"apiTabContent_emmH",apiParameters:"apiParameters_OLII",apiParameter:"apiParameter_tl34",apiParameterHeader:"apiParameterHeader_K8KV",apiParameterName:"apiParameterName_vzqI",apiParameterType:"apiParameterType_Jk9K",apiParameterRequired:"apiParameterRequired_D8WM",apiParameterDescription:"apiParameterDescription_snLF",apiResponse:"apiResponse_Rva0"};var a=t(4848);function r({method:e="GET",endpoint:n,description:t,parameters:r=[],response:c}){const[l,d]=(0,s.useState)("parameters");return(0,a.jsxs)("div",{className:o.apiReference,children:[(0,a.jsxs)("div",{className:o.apiHeader,children:[(0,a.jsxs)("div",{className:o.apiMethodContainer,children:[(0,a.jsx)("span",{className:o.apiMethod,style:{backgroundColor:{GET:"#10b981",POST:"#3b82f6",PUT:"#f59e0b",DELETE:"#ef4444",PATCH:"#3b82f6"}[e]||"#64748b"},children:e}),(0,a.jsx)("code",{className:o.apiEndpoint,children:n})]}),t&&(0,a.jsx)("p",{className:o.apiDescription,children:t})]}),(r.length>0||c)&&(0,a.jsxs)("div",{className:o.apiTabs,children:[(0,a.jsxs)("div",{className:o.apiTabButtons,children:[r.length>0&&(0,a.jsx)("button",{className:(0,i.A)(o.apiTabButton,"parameters"===l&&o.apiTabButtonActive),onClick:()=>d("parameters"),children:"Parameters"}),c&&(0,a.jsx)("button",{className:(0,i.A)(o.apiTabButton,"response"===l&&o.apiTabButtonActive),onClick:()=>d("response"),children:"Response"})]}),(0,a.jsxs)("div",{className:o.apiTabContent,children:["parameters"===l&&r.length>0&&(0,a.jsx)("div",{className:o.apiParameters,children:r.map((e,n)=>(0,a.jsxs)("div",{className:o.apiParameter,children:[(0,a.jsxs)("div",{className:o.apiParameterHeader,children:[(0,a.jsx)("code",{className:o.apiParameterName,children:e.name}),(0,a.jsx)("span",{className:o.apiParameterType,children:e.type}),e.required&&(0,a.jsx)("span",{className:o.apiParameterRequired,children:"required"})]}),e.description&&(0,a.jsx)("p",{className:o.apiParameterDescription,children:e.description})]},n))}),"response"===l&&c&&(0,a.jsx)("pre",{className:o.apiResponse,children:(0,a.jsx)("code",{children:JSON.stringify(c,null,2)})})]})]})]})}},3777:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>u,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"foundations/authentication","title":"Authentication","description":"Complete guide to all 30+ components with live examples, detailed documentation, and usage","source":"@site/docs/foundations/authentication.mdx","sourceDirName":"foundations","slug":"/foundations/authentication","permalink":"/docusaurus-test/docs/foundations/authentication","draft":false,"unlisted":false,"editUrl":"https://github.com/Perfect-Abstractions/Compose/tree/main/docs/docs/foundations/authentication.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Authentication","description":"Complete guide to all 30+ components with live examples, detailed documentation, and usage"},"sidebar":"mainSidebar","previous":{"title":"Overview","permalink":"/docusaurus-test/docs/foundations/overview"},"next":{"title":"Facets & Libraries","permalink":"/docusaurus-test/docs/foundations/facets-and-libraries"}}');var i=t(4848),o=t(8453),a=t(1494),r=t(4680),c=t(2953),l=t(4710);const d={sidebar_position:2,title:"Authentication",description:"Complete guide to all 30+ components with live examples, detailed documentation, and usage"},u=void 0,m={},p=[{value:"Overview",id:"overview",level:2},{value:"Core Features",id:"core-features",level:2},{value:"Access Control Facet",id:"access-control-facet",level:2},{value:"Key Functions",id:"key-functions",level:3},{value:"Usage Example",id:"usage-example",level:2},{value:"Role Hierarchy",id:"role-hierarchy",level:2},{value:"Integration with Custom Facets",id:"integration-with-custom-facets",level:2},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Best Practices",id:"best-practices",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Multi-Signature Admin",id:"multi-signature-admin",level:3},{value:"Time-Locked Roles",id:"time-locked-roles",level:3},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.A,{title:"Authentication",subtitle:"Access control and permission management for your diamond contracts. Build secure systems with role-based access control.",variant:"gradient",height:"small"}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"Authentication in Compose is handled through composable facets that implement role-based access control (RBAC). The system is designed to be flexible, secure, and easy to integrate with your custom facets."}),"\n",(0,i.jsx)(r.A,{type:"info",title:"Key Concept",children:(0,i.jsx)(n.p,{children:"Authentication facets use the same shared storage pattern as all Compose components, allowing both standard and custom facets to check permissions consistently."})}),"\n",(0,i.jsx)(n.h2,{id:"core-features",children:"Core Features"}),"\n",(0,i.jsxs)(l.A,{columns:3,children:[(0,i.jsx)(l.Q,{icon:"\ud83d\udc65",title:"Role-Based Access",description:"Define custom roles with specific permissions for different user types."}),(0,i.jsx)(l.Q,{icon:"\ud83d\udd11",title:"Flexible Permissions",description:"Grant and revoke permissions dynamically without redeployment."}),(0,i.jsx)(l.Q,{icon:"\ud83d\udd12",title:"Secure by Default",description:"Built-in checks and modifiers to prevent unauthorized access."})]}),"\n",(0,i.jsx)(n.h2,{id:"access-control-facet",children:"Access Control Facet"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"AccessControlFacet"})," provides standard role-based access control functionality:"]}),"\n",(0,i.jsx)(n.h3,{id:"key-functions",children:"Key Functions"}),"\n",(0,i.jsx)(c.A,{method:"POST",endpoint:"grantRole(bytes32 role, address account)",description:"Grants a role to an account. Only callable by role admin.",parameters:[{name:"role",type:"bytes32",required:!0,description:"The role identifier (use keccak256 hash of role name)"},{name:"account",type:"address",required:!0,description:"The address to grant the role to"}]}),"\n",(0,i.jsx)(c.A,{method:"DELETE",endpoint:"revokeRole(bytes32 role, address account)",description:"Revokes a role from an account. Only callable by role admin.",parameters:[{name:"role",type:"bytes32",required:!0,description:"The role identifier to revoke"},{name:"account",type:"address",required:!0,description:"The address to revoke the role from"}]}),"\n",(0,i.jsx)(c.A,{method:"GET",endpoint:"hasRole(bytes32 role, address account)",description:"Checks if an account has a specific role.",parameters:[{name:"role",type:"bytes32",required:!0,description:"The role identifier to check"},{name:"account",type:"address",required:!0,description:"The address to check"}],response:{hasRole:!0}}),"\n",(0,i.jsx)(n.h2,{id:"usage-example",children:"Usage Example"}),"\n",(0,i.jsx)(n.p,{children:"Here's how to integrate access control in your custom facet:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:'import {LibAccessControl} from "compose/LibAccessControl.sol";\n\ncontract AdminFacet {\n    // Define your custom role\n    bytes32 public constant ADMIN_ROLE = keccak256("ADMIN_ROLE");\n    \n    function adminOnlyFunction() external {\n        // Check if caller has admin role\n        require(\n            LibAccessControl.hasRole(ADMIN_ROLE, msg.sender),\n            "AccessControl: caller is not admin"\n        );\n        \n        // Your admin logic here\n        performAdminAction();\n    }\n    \n    function performAdminAction() internal {\n        // Implementation\n    }\n}\n'})}),"\n",(0,i.jsx)(r.A,{type:"tip",title:"Best Practice",children:(0,i.jsxs)(n.p,{children:["Always define role constants using ",(0,i.jsx)(n.code,{children:"keccak256"})," hashes of descriptive names. This makes your code more readable and prevents typos."]})}),"\n",(0,i.jsx)(n.h2,{id:"role-hierarchy",children:"Role Hierarchy"}),"\n",(0,i.jsx)(n.p,{children:"Compose supports hierarchical roles where certain roles can manage other roles:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:'// Setup role hierarchy\nbytes32 public constant DEFAULT_ADMIN_ROLE = 0x00;\nbytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");\nbytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");\n\n// DEFAULT_ADMIN_ROLE can grant/revoke MINTER_ROLE and BURNER_ROLE\n// MINTER_ROLE can only mint\n// BURNER_ROLE can only burn\n'})}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-custom-facets",children:"Integration with Custom Facets"}),"\n",(0,i.jsxs)(n.p,{children:["Your custom facets can use ",(0,i.jsx)(n.code,{children:"LibAccessControl"})," to check permissions:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:'import {LibAccessControl} from "compose/LibAccessControl.sol";\nimport {LibERC20} from "compose/LibERC20.sol";\n\ncontract TokenMinterFacet {\n    bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");\n    \n    function mintTokens(address to, uint256 amount) external {\n        // Check minter permission\n        require(\n            LibAccessControl.hasRole(MINTER_ROLE, msg.sender),\n            "TokenMinter: caller is not minter"\n        );\n        \n        // Mint using Compose\'s ERC20 library\n        LibERC20.mint(to, amount);\n    }\n}\n'})}),"\n",(0,i.jsx)(r.A,{type:"success",title:"Shared Storage Power",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"LibAccessControl"})," library accesses the same storage as ",(0,i.jsx)(n.code,{children:"AccessControlFacet"}),", so permissions set through the facet are instantly available to your custom facets!"]})}),"\n",(0,i.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,i.jsx)(r.A,{type:"warning",title:"Important",children:(0,i.jsxs)(n.p,{children:["Always protect role management functions. The ",(0,i.jsx)(n.code,{children:"DEFAULT_ADMIN_ROLE"})," has ultimate control over all roles."]})}),"\n",(0,i.jsx)(n.h3,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Role Modifiers"}),": Create reusable modifiers for role checks"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Minimize Admin Privileges"}),": Grant only necessary permissions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Audit Role Changes"}),": Emit events for all role grants/revokes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Test Thoroughly"}),": Verify access control in all scenarios"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Document Roles"}),": Clearly document what each role can do"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"multi-signature-admin",children:"Multi-Signature Admin"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:"// Use a multi-sig wallet as the admin role holder\naddress multiSigWallet = 0x...;\nLibAccessControl.grantRole(DEFAULT_ADMIN_ROLE, multiSigWallet);\n"})}),"\n",(0,i.jsx)(n.h3,{id:"time-locked-roles",children:"Time-Locked Roles"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-solidity",children:'contract TimeLockFacet {\n    bytes32 public constant OPERATOR_ROLE = keccak256("OPERATOR_ROLE");\n    \n    mapping(address => uint256) public roleExpiry;\n    \n    function grantTemporaryRole(\n        address account,\n        uint256 duration\n    ) external {\n        require(\n            LibAccessControl.hasRole(DEFAULT_ADMIN_ROLE, msg.sender),\n            "Not admin"\n        );\n        \n        LibAccessControl.grantRole(OPERATOR_ROLE, account);\n        roleExpiry[account] = block.timestamp + duration;\n    }\n    \n    function revokeExpiredRoles(address account) external {\n        if (block.timestamp >= roleExpiry[account]) {\n            LibAccessControl.revokeRole(OPERATOR_ROLE, account);\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(l.A,{columns:2,children:[(0,i.jsx)(l.Q,{icon:"\ud83d\udc8e",title:"Facets & Libraries",description:"Learn how authentication integrates with the facet architecture.",href:"/docs/foundations/facets-and-libraries"}),(0,i.jsx)(l.Q,{icon:"\ud83d\udee1\ufe0f",title:"Security Best Practices",description:"Explore comprehensive security patterns for your contracts.",href:"/docs/foundations/security"})]})]})}function x(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},4680:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);var s=t(4164);const i={callout:"callout_Dd07",calloutHeader:"calloutHeader_Ze7M",calloutIcon:"calloutIcon_iGDX",calloutTitle:"calloutTitle_TcTP",calloutContent:"calloutContent_epxi","callout--info":"callout--info_xat9","callout--warning":"callout--warning_Tgkt","callout--danger":"callout--danger_S8iB","callout--success":"callout--success_nOOE","callout--tip":"callout--tip_Bc0V","callout--note":"callout--note_JInl"};var o=t(4848);function a({type:e="info",title:n,children:t,icon:a=!0}){const r={info:"\ud83d\udca1",warning:"\u26a0\ufe0f",danger:"\ud83d\udeab",success:"\u2705",tip:"\ud83d\udca1",note:"\ud83d\udcdd"};return(0,o.jsxs)("div",{className:(0,s.A)(i.callout,i[`callout--${e}`]),children:[(0,o.jsxs)("div",{className:i.calloutHeader,children:[a&&(0,o.jsx)("span",{className:i.calloutIcon,children:r[e]||r.info}),n&&(0,o.jsx)("span",{className:i.calloutTitle,children:n})]}),(0,o.jsx)("div",{className:i.calloutContent,children:t})]})}},4710:(e,n,t)=>{t.d(n,{Q:()=>a,A:()=>o});t(6540);const s={featureGrid:"featureGrid_Vp3z",featureItem:"featureItem_r9hu",featureIcon:"featureIcon_RFdN",iconEmoji:"iconEmoji_VWHR",featureTitle:"featureTitle_IVo4",featureDescription:"featureDescription_FTZb"};var i=t(4848);function o({columns:e=3,children:n}){return(0,i.jsx)("div",{className:s.featureGrid,style:{"--grid-columns":e},children:n})}function a({icon:e,title:n,description:t,href:o,children:a}){const r=()=>(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)("div",{className:s.featureIcon,children:"string"==typeof e?(0,i.jsx)("span",{className:s.iconEmoji,children:e}):e}),(0,i.jsx)("h3",{className:s.featureTitle,children:n}),t&&(0,i.jsx)("p",{className:s.featureDescription,children:t}),a]});return o?(0,i.jsx)("a",{href:o,className:s.featureItem,children:(0,i.jsx)(r,{})}):(0,i.jsx)("div",{className:s.featureItem,children:(0,i.jsx)(r,{})})}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(6540);const i={},o=s.createContext(i);function a(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);